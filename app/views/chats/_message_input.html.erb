<%# locals: (with_error: false) %>
<% class_names = with_error ? "border-2 border-rose-500 focus:border-2 focus:border-rose-500" : "border-none" %>
<div class="p-4 border-t bg-white" id="message-input">
  <%= form_with model: @chat, url: chat_path(@chat.token), method: :put, class: "flex" do |f| %>
    <%= fields_for :messages, Message.new do |m| %>
      <%= m.text_field :content,
                        autofocus: true,
                        autocomplete: "off",
                        required: true,
                        placeholder: "Write a message...",
                        class: [class_names, "flex-1 px-4 py-2 placeholder:text-gray-400 focus:outline-none focus:ring-0"] %>
    <% end %>
    <%= f.submit "Send", class: "ml-3 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-500" %>
  <% end %>
</div>
